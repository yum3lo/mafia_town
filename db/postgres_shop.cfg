global
  daemon
  maxconn 256

defaults
  mode tcp
  timeout connect 5s
  timeout client  30s
  timeout server  30s

frontend postgres
  bind *:5432
  default_backend postgres_nodes

backend postgres_nodes
  option tcp-check
  default-server inter 3s fall 3 rise 2
  server primary postgres_shop_primary:5432 check
  server replica1 postgres_shop_replica_1:5432 check
  server replica2 postgres_shop_replica_2:5432 check
